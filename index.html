<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>רביעיות</title>
    <base href="/">
</head>
<body dir="rtl">
<div ng-app="fours" ng-strict-di>
    <div ng-view>

    </div>
</div>
<div style="display:none">
    <canvas id="print_canvas">

    </canvas>
</div>
<div>
    <h1>IMAGES</h1>
    <div id="images"></div>
</div>
</body>

<script src="/dist/all.js"></script>
<script>
    function printSVG() {
        var canvas = document.getElementById('print_canvas');
        var ctx = canvas.getContext('2d');

        var data = '<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200">' +
            '<foreignObject width="100%" height="100%">' +
            '<div xmlns="http://www.w3.org/1999/xhtml" style="font-size:40px">' +
            '<em>I</em> like ' +
            '<span style="color:white; text-shadow:0 0 2px blue;">' +
            'cheese</span>' +
            '</div>' +
            '</foreignObject>' +
            '</svg>';

        var svg = document.getElementsByClassName("card-svg")[0];
        var svgData = svg.outerHTML;
        console.log(svgData);
        data = encodeURIComponent(svgData);

        var img = new Image();

        img.onload = function () {
            console.log("on load")
            ctx.drawImage(img, 0, 0);
            //console.log(canvas.toDataURL());

            canvas.toBlob(function (blob) {
                var newImg = document.createElement('img'),
                    url = URL.createObjectURL(blob);

                newImg.onload = function () {
                    // no longer need to read the blob so it's revoked
                    URL.revokeObjectURL(url);
                };

                newImg.src = url;
                document.body.appendChild(newImg);
            });
        }

        img.src = "data:image/svg+xml," + data
    }
    // window.setTimeout(function() {
    //     printSVG();
    // }, 1000);
</script>
</div>
</body>
</html>
